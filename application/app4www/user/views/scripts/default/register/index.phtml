<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <?php echo $this->render(SEED_WWW_TPL . '/layouts/headerLink.phtml'); ?>
	<title>快移</title>
	<link href="/ky/css/index/index.css" rel="stylesheet">
	<link href="/ky/css/register/register.css" rel="stylesheet">
</head>
<body>

<nav class="navbar navbar-default navbar-static-top top-memu shadow">
	<div class="container">
		<div class="navbar-header">
			<a class="navbar-brand" href="javascript:void(0)">
				<img alt="eTradeFast" src="/ky/images/logo.png">
			</a>
		</div>
		<div class="collapse navbar-collapse">
			<p class="navbar-text">
				欢迎注册
			</p>

			<p class="navbar-text navbar-right">
				已经注册，现在就 <a href="<?php echo $this->seed_Setting['user_app_server'] ?>/" class="navbar-link">登录</a>
			</p>
		</div>
	</div>
</nav>

<div class="container-fluid register-body">
	<div class="container">
		<div class="col-md-10 col-md-offset-1 register-form-div">
			<form class="form-horizontal register-form-body" action="<?php echo $this->baseUrl();?>/register" method="post" id="register_form" name="register_form">
				<div class="register-user-info">
                    <?php echo $this->translate('userTT'); ?>
				</div>
				
				<div class="form-group">
					<label for="name" class="col-sm-3 control-label"><?php echo $this->translate('name'); ?></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" name="name" id="name" required placeholder="<?php echo $this->translate('name'); ?>">
					</div>
				</div>
				
				<div class="form-group">
					<label for="ecommloginname" class="col-sm-3 control-label"><?php echo $this->translate('elogname'); ?></label>
					<div class="col-sm-9">
						<input type="email" class="form-control" name="ecommloginname" id="ecommloginname" required placeholder="<?php echo $this->translate('elogname'); ?>">
					</div>
				</div>

				<div class="form-group">
					<label for="ecommpasswsd" class="col-sm-3 control-label"><?php echo $this->translate('password'); ?></label>
					<div class="col-sm-9">
						<input type="password" class="form-control" name="ecommpasswsd" id="ecommpasswsd" required placeholder="<?php echo $this->translate('password').'('.$this->translate('is_passwd').')'; ?>">
					</div>
				</div>

				<div class="form-group">
					<label for="checkecommrpasswsd" class="col-sm-3 control-label"><?php echo $this->translate('confirmPSD'); ?></label>
					<div class="col-sm-9">
						<input type="password" class="form-control" name="checkecommrpasswsd" id="checkecommrpasswsd" required placeholder="<?php echo $this->translate('is_rpasswd'); ?>">
					</div>
				</div>

				<div class="form-group">
					<label for="mobilePhone" class="col-sm-3 control-label"><?php echo $this->translate('phone'); ?></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" name="mobilePhone" id="mobilePhone" required placeholder="<?php echo $this->translate('is_phone'); ?>">
					</div>
				</div>

				<div class="register-company-info">
                    <?php echo $this->translate('companyINF'); ?>
				</div>

				<div class="form-group">
					<label for="regdcountryCode" class="col-sm-3 control-label"><?php echo $this->translate('address'); ?></label>
					<div class="col-sm-9">
						<select class="form-control" name="regdcountryCode" id="regdcountryCode" required>
                            <?php echo $this->ShowDictionaryList($this->dic_Setting['COUNTRY_ISO_CODE'], $this->userlangCode, $this->dic_Setting['COUNTRY_ISO_CODE']); ?>
						</select>
					</div>
				</div>

				<div class="form-group">
					<label for="regdAddress" class="col-sm-3 control-label"></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" name="regdAddress" id="regdAddress" required placeholder="<?php echo $this->translate('is_regadress'); ?>">
					</div>
				</div>
				
				<div class="form-group">
					<label for="accountName" class="col-sm-3 control-label"><?php echo $this->translate('regd_company_name'); ?></label>
					<div class="col-sm-9">
						<input type="text" class="form-control" name="accountName" id="accountName" required placeholder="<?php echo $this->translate('is_comname'); ?>">
					</div>
				</div>

				<div class="form-group">
					<label for="email" class="col-sm-3 control-label"><?php echo $this->translate('companyEM'); ?></label>
					<div class="col-sm-9">
						<input type="email" class="form-control" name="email" id="email" required placeholder="<?php echo $this->translate('ps_email'); ?>">
					</div>
				</div>

				<div class="form-group">
					<label for="serviceContract" class="col-sm-3 control-label"></label>
					<div class="checkbox col-sm-9">
						<label>
							<input type="checkbox" value="" name="serviceContract" id="serviceContract" required>
							<input type="hidden" id="isReadServiceContract" value="false">
                            <?php echo $this->translate('agree'); ?>&nbsp;
						</label>
						<a href="javascript:void(0)" id="check_doc" style="color: #01AAED;"><?php echo $this->translate('service_contract'); ?></a>
					</div>
				</div>

				<div class="form-group">
					<button type="submit" class="btn btn-warning btn-default btn-block"><?php echo $this->translate('returnReg'); ?></button>
				</div>
			</form>
		</div>
	</div>
</div>

<footer class="footer-body">
	<div class="container">
		<div class="row">
			<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 hidden-xs">
				<h4>关于我们</h4>
				<p>提供营运资本咨询服务和更灵活的解决方案，改进营运资金成本和更好管理贸易风险。</p>
				<p>创新供应链金融服务模式：快移金融创始者及践行者。</p>
				<p>IFG的成员，充分利用全球经验，助中国的贸易合作伙伴，以加快国际化。</p>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
				<h4>联系我们</h4>
				<p>深圳市骏海威科技网络控股有限公司</p>
				<p><i class="fas fa-map-marker-alt" style="color: #f0ad4e;"></i> 深圳市罗湖区嘉宾路深化商业大厦1502</p>
				<p><i class="fas fa-phone-square" style="color: #f0ad4e;"></i> +86-755-82383762</p>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
				<img src="/ky/images/Email-index.png" class="img-responsive" alt="E-Mail">
				<img src="/ky/images/wechat.png" class="img-responsive" alt="WeChat">
				<img src="/ky/images/linkedIn.png" class="img-responsive" alt="LinkedIn">
			</div>
		</div>
		<hr>
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
				<p>Copyright © 2015-2017 快移交易 eTradeFast 版权所有</p>
				<p>粤ICP备17023256号-1kk</p>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
				<div class="pull-right">
					language
				</div>
			</div>
		</div>
	</div>
</footer>

<?php echo $this->render(SEED_WWW_TPL . '/layouts/footerLink.phtml'); ?>

<script type="text/javascript">
	$().ready(function() {
		$("#register_form").validate({
			rules: {
				ecommloginname: {
					checkLoginName: true
				},
				ecommpasswsd: {
					isValidPassword: true,
					minlength: 8,
					maxlength: 30
				},
				checkecommrpasswsd: {
					reCheckPassword: true
				}
			},
			messages: {
				ecommpasswsd : {
					required: "<?php echo $this->translate('de_null'); ?>",
					minlength: "<?php echo $this->translate('mat_psd');?>",
					maxlength: "<?php echo $this->translate('is_passwd');?>"
				},
				serviceContract: {
					required: "<?php echo $this->translate('check_service_contract'); ?>"
				}
			},
			errorPlacement: function(error, element) {
				// Append error within linked label
				$(element)
					.closest( "form" )
					.find( "label[for='" + element.attr( "id" ) + "']" )
					.parent().addClass("has-error").removeClass("has-success")
					.append( error );
			},
			success: function(label) {
				var forName = $(label).attr("for");
				$("label[for='" + forName + "']").parent().addClass("has-success").removeClass("has-error");
			},
			highlight: function (element) {
				$("label[for='" + element.id + "']").parent().addClass("has-error").removeClass("has-success");
			},
			submitHandler: function (form) {
				form.submit();
			}
		});
	});

	$(function () {
		$("#serviceContract").click(function () {
			if ($("#isReadServiceContract").val() == 'false') {
				$("#serviceContract").prop('checked', false);
				toReadServiceContract();
			}
		});
		$("#check_doc").click(function () {
			if ($("#isReadServiceContract").val() == 'false') {
				$("#serviceContract").prop('checked', false);
			}
			toReadServiceContract();
		});
	});
	
	function toReadServiceContract() {
		$.post('/register/servicehtml', {}, function(service){
			layer.open({
				type: 1,
				title: "<?php echo $this->translate('service_contract'); ?>",
				area: ['1024px', '97%'],
				scrollbar: false,
				content: service,
				success: function(layero, index){
					$(".layui-layer-content").scroll(function () {
						// console.log(this.scrollHeight);
						if (this.scrollHeight - this.scrollTop === this.clientHeight) {
							console.log("in");
							$("#isReadServiceContract").val('true');
							$("#serviceContract").prop('checked', true);
						}
					});
				}
			});
		});
	}

	// 邮箱登录名验证
	jQuery.validator.addMethod("checkLoginName", function(value, element) {
		return $.post("<?php echo $this->BaseUrl();?>/register/check", {
				ecommloginname: value
			},
			function (data) {
				data = jQuery.parseJSON(data);
				return data.result == false;
			}
		);
	}, "<?php echo $this->translate('de_use');?>");

	// 密码规验证(8-30位  字母数字)
	jQuery.validator.addMethod("isValidPassword", function(value, element) {
		var regExp=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,30}$/;
		return this.optional(element) || (regExp.test(value));
	}, "<?php echo $this->translate('is_passwd');?>");

	// 验证确认密码
	jQuery.validator.addMethod("reCheckPassword", function(value, element) {
		var psw = $("#ecommpasswsd").val();
		return this.optional(element) || (value === psw);
	}, "<?php echo $this->translate('is_psd');?>");
</script>
</body>