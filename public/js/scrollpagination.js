(function($){$.fn.scrollPagination = function(options) {var opts = $.extend($.fn.scrollPagination.defaults, options);var target = opts.scrollTarget;if (target == null){target = obj; }opts.scrollTarget = target;return this.each(function() {$.fn.scrollPagination.init($(this), opts);});};$.fn.stopScrollPagination = function(){return this.each(function() {$(this).attr('scrollPagination', 'disabled');});};
$.fn.scrollPagination.loadContent = function(obj, opts){var target = opts.scrollTarget;var mayLoadContent = $(target).scrollTop()+opts.heightOffset >= $(document).height() - $(target).height();if (mayLoadContent){if (opts.beforeLoad != null){opts.beforeLoad(); }if(opts.refunction != null){opts.refunction();}else{$(obj).children().attr('rel', 'loaded');$.ajax({type: 'POST',url: opts.contentPage,data: opts.contentData,dataType: 'html',success: function(data){$(obj).append(data);var objectsRendered = $(obj).children('[rel!=loaded]');if (opts.afterLoad != null){opts.afterLoad(objectsRendered);}}});}}}; $.fn.scrollPagination.init = function(obj, opts){var target = opts.scrollTarget;$(target).scroll(function(event){if ($(opts.reference).attr('att') == '1'){$.fn.scrollPagination.loadContent(obj, opts);		}else {event.stopPropagation();}});$.fn.scrollPagination.loadContent(obj, opts);};$.fn.scrollPagination.defaults = {'contentPage' : null,'contentData' : {},'beforeLoad': null,'afterLoad': null,'scrollTarget': null,'heightOffset': 0,'refunction':null,'reference':'obj'};})(jQuery);